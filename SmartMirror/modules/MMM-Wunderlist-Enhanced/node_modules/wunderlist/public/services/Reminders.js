'use strict';

/**
  * Provides methods for easy access to reminder data.
  * @module services/Reminders
  * @extends module:services/AuthenticatedService
  * @requires module:services/AuthenticatedService

  * @example <caption>Create an instance of the Reminders service</caption>
    var RemindersService = require('services/Reminders');
    var reminders = new RemindersService();

  * @example <caption>Get reminders for a task</caption>
    var taskID = 349587;
    reminders.forTask(taskID)
      .done(function (remindersData, statusCode) {
        // ...
      })
      .fail(function (resp, code) {
        // ...
      });

  * @example <caption>Get reminders for a list</caption>
    var listID = 349587;
    reminders.forList(listID)
      .done(function (remindersData, statusCode) {
        // ...
      })
      .fail(function (resp, code) {
        // ...
      });

  * @example <caption>Get a specific reminder</caption>
    var reminderID = 34958734958;
    reminder.getID(reminderID)
      .done(function (reminderData, statusCode) {
        // ...
      })
      .fail(function (resp, code) {
        // ...
      });

  * @example <caption>Create a reminder</caption>
    var reminderData = {
      'task_id': 59191,
      'date': '2013-08-30T08:29:46.203Z'
    };
    reminders.create(reminderData)
      .done(function (reminderData, statusCode) {
        // ...
      })
      .fail(function (resp, code) {
        // ...
      });

  * @example <caption>Update a reminder</caption>
    var reminderID = 349587;
    var reminderRevision = 23;
    var reminderUpdateData = {
      'date': '2275-08-30T08:29:46.203Z'
    };
    reminders.update(reminderID, reminderRevision, reminderUpdateData)
      .done(function (reminderData, statusCode) {
        // ...
      })
      .fail(function (resp, code) {
        // ...
      });

  * @example <caption>Delete a reminder</caption>
    var reminderID = 2395872394;
    reminders.deleteID(reminderID)
      .always(function (resp, code) {
        // ...
      });
  */

var AuthenticatedService = require('./AuthenticatedService');

module.exports = AuthenticatedService.extend({
  'baseUrl': '/reminders',
  'type': 'reminder',

  /**
    * Allows fetching reminders for a list.
    * @param {string} listId - The list to fetch.
    * @param {boolean} [completed] - Fetch reminders under completed tasks when TRUE
    * @param {string} [requestID] - User supplied Request ID. Autogenerated if not supplied.
    */
  'forList': function (listId, completed, requestID) {

    var self = this;

    var request = self.get(self.baseUrl, {
      'list_id': listId,
      'completed_tasks': !!completed
    }, requestID);

    return request.promise();
  },
});
